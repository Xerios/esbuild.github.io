var L=document.getElementById("outputResult"),te=document.createElement("textarea"),ne=document.createElement("textarea"),F=document.createElement("textarea"),re=document.createElement("textarea"),oe=document.createElement("textarea"),Y=[],ee=!1;C(te,!0);C(ne,!0);C(F,!0);C(re,!0);C(oe,!0);function v(e){e.style.height="0",e.style.height=e.scrollHeight+1+"px"}function C(e,t=!1){e.readOnly=t,e.spellcheck=!1,e.autocapitalize="off",e.autocomplete="off"}function U(e){let t=`\x1B[31m\u2718 \x1B[41;31m[\x1B[41;97mERROR\x1B[41;31m]\x1B[0m \x1B[1m${e&&e.message||e}\x1B[0m`,o=e&&e.j,r=e&&e.se;if(o&&(t+=pe(o)),r)for(let a of r)t+=`
  ${a.B}`,a.j&&(t+=pe(a.j));return t}function pe({te:e,E:t,T:o,Q:r,re:a,oe:s}){let n=r<2?"^":"~".repeat(r),f=`

    ${e}:${t}:${o}:
`;return f+=`\x1B[37m${t.toString().padStart(7)} \u2502 ${a.slice(0,o)}\x1B[32m${a.slice(o,o+r)}\x1B[37m${a.slice(o+r)}
`,s&&(f+=`        \u2502 ${" ".repeat(o)}\x1B[32m${n}\x1B[37m
`,n=s),f+=`        \u2575 ${" ".repeat(o)}\x1B[32m${n}\x1B[0m
`,f}function $(e,t,o){if(o!==void 0){let r=document.createElement("div");e.textContent=o.replace(/\n$/,""),r.id=t,r.className="hasLabel",r.append(e),L.append(r),v(e)}}function se({le:e,ie:t,V:o,ae:r,R:a}){if(L.innerHTML="",$(te,"transformOutput",e),t&&$(oe,"sourceMap",t),o&&$(F,"transformMangleCache",JSON.stringify(o,null,2)),$(ne,"legalComments",r),a){let s=document.createElement("div");s.id="stderrLog",s.innerHTML=he(a),L.append(s)}if(e===void 0&&!a){let s=document.createElement("div");s.id="outputStatus",s.textContent="(no output)",L.append(s)}}function ie({ce:e,ue:t,V:o,R:r},a){if(L.innerHTML="",Y.length=0,e)for(let s of e){let n=document.createElement("div"),f=document.createElement("div"),u=document.createElement("textarea");f.className="outputPath",f.textContent=s.path.replace(/^\//,""),u.readOnly=!0,u.value=s.text.replace(/\n$/,""),C(u),n.className="buildOutput hasLabel",n.append(u),L.append(f,n),Y.push(u),v(u)}if(r){let s=document.createElement("div");s.id="stderrLog",s.innerHTML=he(r),L.append(s)}if((!e||!e.length)&&!r){let s=document.createElement("div");s.id="outputStatus",s.textContent=a?"(no output)":"(no entry points)",L.append(s)}o&&$(F,"mangleCache",JSON.stringify(o,null,2)),t&&$(re,"metafile",JSON.stringify(t,null,2))}function N(e){e&&(ee=!1),!ee&&(L.innerHTML=`<span id="outputStatus">Loading${e?" version "+e:""}...</span>`)}function ge(e){ee=!0,L.innerHTML="";let t=document.createElement("div");t.className="problem",t.innerHTML=`\u274C Failed to load esbuild: ${e}`,L.append(t)}function he(e){return"<span>"+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\033\[([^m]*)m/g,(t,o)=>{switch(o){case"1":return'</span><span class="color-bold">';case"31":return'</span><span class="color-red">';case"32":return'</span><span class="color-green">';case"33":return'</span><span class="color-yellow">';case"35":return'</span><span class="color-magenta">';case"37":return'</span><span class="color-dim">';case"41;31":return'</span><span class="bg-red color-red">';case"41;97":return'</span><span class="bg-red color-white">';case"43;33":return'</span><span class="bg-yellow color-yellow">';case"43;30":return'</span><span class="bg-yellow color-black">';case"0":return"</span><span>"}throw new Error(`Unknown escape sequence: ${o}`)})+"</span>"}addEventListener("resize",()=>{if(k===0)v(te),v(oe),v(ne);else{for(let e of Y)v(e);v(re)}v(F)});function V(e,t){let o=e.trimStart();if(!o)return{};if(/^{|^\/[*/]/.test(o))return Ce(e);let r=n=>{if(s[n]!==void 0)try{s[n]=new RegExp(s[n]+"")}catch(f){throw n=n.replace(/[A-Z]/g,u=>"-"+u.toLowerCase()),new Error(`Invalid regular expression for "--${n}=": ${f.message}`)}},a=n=>{s[n]!==void 0&&(s[n]=(s[n]+"").split(","))},s=Se(e,t);return r("mangleProps"),r("reserveProps"),a("resolveExtensions"),a("mainFields"),a("conditions"),a("target"),s}function Se(e,t){let o=[],r=e.length,a=0,s=0,n=0;for(;n<r;){let l=n,h=a,p=n-s,d="",c=e[n];if(c===" "||c==="	"||c===`
`){n++,c===`
`&&(a++,s=n);continue}for(;n<r&&(c=e[n],!(c===" "||c==="	"||c===`
`));)if(n++,c==="\\"&&n<r)c=e[n++],c===`
`?(a++,s=n):d+=c;else if(c==="'"){let m=a,E=n-s-1;for(;n===r&&ae(e,"'",m,E,a,n-s),c=e[n++],c!=="'";){if(c==="\\"&&n<r&&e[n]!=="'"&&(c=e[n++],c===`
`)){a++,s=n;continue}c===`
`&&(a++,s=n),d+=c}}else if(c==='"'){let m=a,E=n-s-1;for(;n===r&&ae(e,'"',m,E,a,n-s),c=e[n++],c!=='"';){if(c==="\\"&&n<r&&(c=e[n++],c===`
`)){a++,s=n;continue}c===`
`&&(a++,s=n),d+=c}}else d+=c;o.push({B:d,E:h,T:p,Q:n-l})}let f=[],u=Object.create(null),i=(l,h)=>(l!==l.toLowerCase()&&x(e,"Invalid CLI-style flag: "+JSON.stringify("--"+l),h.E,h.T,l.length+2),l.replace(/-(\w)/g,(p,d)=>d.toUpperCase()));for(let{B:l,...h}of o)if(l.startsWith("--")){let p=l.indexOf(":"),d=l.indexOf("=");if(p>=0&&d<0){let c=i(l.slice(2,p),h),m=l.slice(p+1);(!(c in u)||!Array.isArray(u[c]))&&(u[c]=[]),u[c].push(m)}else if(p>=0&&p<d){let c=i(l.slice(2,p),h),m=l.slice(p+1,d),E=l.slice(d+1);(!(c in u)||typeof u[c]!="object"||Array.isArray(u[c]))&&(u[c]=Object.create(null)),u[c][m]=E}else if(d>=0){let c=l.slice(d+1);u[i(l.slice(2,d),h)]=c==="true"?!0:c==="false"?!1:c}else u[i(l.slice(2),h)]=!0}else l.startsWith("-")||t===0?x(e,'All CLI-style flags must start with "--"',h.E,h.T,h.Q):f.push(l);return f.length&&(u.entryPoints=f),u}function Ce(e){let t=()=>{let p=l.v===10?"string":(l.v===8?"identifier ":"")+JSON.stringify(l.B);return x(e,`Unexpected ${p} in ${s}`,l.E,l.T,l.B.length)},o=(p,d,c)=>x(e,`Expected "${d}" after ${c} in ${s}`,p.E,p.T+p.B.length,0,"",0,0,0,d),r=(p=!1)=>{for(;i<n;){let d=f,c=i-u,m=e[i];if(m===`
`){f++,u=++i;continue}if(m===" "||m==="	"){i++;continue}if(m==="/"){let S=i++;if(i<n&&e[i]==="/"){for(i++;i<n&&e[i]!==`
`;)i++;continue}if(i<n&&e[i]==="*"){for(i++;;)if(i===n&&x(e,'Expected "*/" to terminate multi-line comment',f,i-u,0,"The multi-line comment starts here:",d,c,2,"*/"),m=e[i++],m===`
`)f++,u=i;else if(m==="*"&&i<n&&e[i]==="/"){i++;break}continue}let g=0;for(;(i===n||e[i]===`
`)&&(g?x(e,'Expected "]" to terminate character class',f,i-u,0,"The character class starts here:",f,g-u,1,"]"):x(e,'Expected "/" to terminate regular expression',f,i-u,0,"The regular expression starts here:",d,c,1,"/")),m=e[i++],!(m==="/"&&!g);)m==="]"&&g?g=0:m==="["?g=i-1:m==="\\"&&i<n&&e[i]!==`
`&&i++;for(;i<n&&/\w/.test(e[i]);)i++;let b=e.slice(S,i),y;try{y=(0,eval)(b)}catch{x(e,`Invalid regular expression in ${s}`,d,c,i-S)}l={E:d,T:c,v:9,B:b,k:y};return}p&&x(e,`Expected end of file after ${s}`,f,i-u,0);let E="-,:[]{}+".indexOf(m);if(E>=0){i++,l={E:d,T:c,v:E,B:m,k:m};return}if(m==="."||m>="0"&&m<="9"){let S=/^[\.\w]$/,g=i++;for(;i<n&&S.test(e[i]);)i++;let b=e.slice(g,i);if(!/\d/.test(b))i=g;else{let y=+b;y!==y&&x(e,`Invalid number "${b}" in ${s}`,d,c,i-g),l={E:d,T:c,v:9,B:b,k:y};return}}let A=/^[\w\$]$/;if(A.test(m)){let S=i++;for(;i<n&&A.test(e[i]);)i++;let g=e.slice(S,i),b=9,y=g;g==="null"?y=null:g==="true"?y=!0:g==="false"?y=!1:g==="undefined"?y=void 0:g==="Infinity"?y=1/0:g==="NaN"?y=NaN:b=8,l={E:d,T:c,v:b,B:g,k:y};return}if(m==='"'||m==="'"){let S=i++;for(;;)if((i===n||e[i]===`
`)&&ae(e,m,d,c,f,i-u),e[i]==="\\"&&i+1<n)i+=2,e[i-1]===`
`&&(f++,u=i);else if(e[i++]===m)break;let g=e.slice(S,i),b;try{b=(0,eval)(g)}catch{x(e,`Invalid string in ${s}`,d,c,i-S)}l={E:d,T:c,v:10,B:g,k:b};return}x(e,`Unexpected ${JSON.stringify(m)} in ${s}`,f,i-u,1)}p||x(e,`Unexpected end of file in ${s}`,f,i-u,0)},a=()=>{if(l.v===5){let p=Object.create(null);for(;r(),l.v!==6;){l.v!==10&&l.v!==8&&t();let d=l;r(),l.v!==2&&o(d,":","property "+JSON.stringify(d.k)),r(),p[d.k]=a();let c=l;if(r(),l.v===6)break;l.v!==1&&o(c,",","property "+JSON.stringify(d.k))}return p}if(l.v===3){let p=[],d=0;for(;r(),l.v!==4;)if(l.v!==1){p[d++]=a();let c=l;if(r(),l.v===4)break;l.v!==1&&o(c,",","array element")}else p.length=++d;return p}return l.v===9||l.v===10?l.k:l.v===7?(r(),+a()):l.v===0?(r(),-a()):t()},s="JSON5 value",n=e.length,f=0,u=0,i=0,l;r();let h=a();return r(!0),h}function x(e,t,o,r,a,s="",n=0,f=0,u=0,i){let l=e.split(`
`),h=new Error(t);throw h.j={te:"<options>",E:o+1,T:r,Q:a,re:l[o],oe:i},s&&(h.se=[{B:s,j:{te:"<options>",E:n+1,T:f,Q:u,re:l[n]}}]),h}function ae(e,t,o,r,a,s){let n=t==='"'?"double":"single";x(e,`Failed to find the closing ${n} quote`,a,s,0,`The opening ${n} quote is here:`,o,r,1,t)}var M=document.querySelector("#transformOptions textarea"),O=document.querySelector("#transformInput textarea");function ve(){return[M.value,O.value]}function ye(e,t){(M.value!==e||O.value!==t)&&(M.value=e,O.value=t,W()),j()}function j(){v(M),v(O)}function W(){z();try{_({G:"transform",K:O.value,N:V(M.value,0)}).then(e=>{se(e)},()=>{})}catch(e){se({R:U(e)})}}M.oninput=()=>{v(M),W()};O.oninput=()=>{v(O),W()};addEventListener("resize",j);j();var k=0,xe=[document.getElementById("transformPanel"),document.getElementById("buildPanel")],Pe=document.getElementById("modeSwitcher"),K=Pe.querySelectorAll("a");K[0].onclick=()=>{q(0)&&(N(null),G())};K[1].onclick=()=>{be(),q(1)&&(N(null),G())};function q(e){return k===e?!1:(K[k].classList.remove("active"),xe[k].style.display="none",k=e,K[k].classList.add("active"),xe[k].style.display="block",!0)}function G(){k===0?(j(),W()):(Q(),B())}var Ee=Me(),T=document.querySelector("#versionPicker select"),Z=document.createElement("option"),le;Z.textContent="Loading...";T.append(Z);T.disabled=!0;Ee.then(e=>{let t=e.filter(o=>!/^0\.[0-4]\.|^0\.5\.0/.test(o));T.disabled=!1,Z.remove();for(let o of t){let r=document.createElement("option");r.textContent=o,T.append(r)}T.onchange=()=>le(T.value),T.selectedIndex=-1},()=>{Z.textContent="\u274C Loading failed!"});function Te(){return T.disabled||T.selectedIndex<0?null:T.value}function ce(e){le=e}async function J(e){let t=await Ee,o=e==="latest"&&t.length?0:t.indexOf(e);o>=0&&T.selectedIndex!==o&&(T.selectedIndex=o,await le(t[o]))}async function Me(){try{let e="https://data.jsdelivr.com/v1/package/npm/esbuild-wasm",t=(await fetch(e).then(o=>o.json())).versions;if(t&&t.length)return console.log(`Loaded ${t.length} versions from ${e}`),t}catch(e){console.error(e)}try{let e="https://registry.npmjs.org/esbuild-wasm",t=(await fetch(e).then(o=>o.json())).versions;if(t&&(t=Object.keys(t).reverse(),t.length))return console.log(`Loaded ${t.length} versions from ${e}`),t}catch(e){console.error(e)}throw new Error}var Oe=fetch("worker.js").then(e=>e.text()),I=null,P=null,X=new Promise((e,t)=>{ce(o=>{let r=Le(o);return r.then(e,t),ce(a=>(X.then(s=>s.terminate()),X=Le(a),X)),r})});async function we(e){try{let t=await fetch(`https://cdn.jsdelivr.net/npm/${e}`);if(t.ok)return t}catch{}return fetch(`https://unpkg.com/${e}`)}async function Le(e){var o;let t;N(e);try{I&&I.X(),P&&P.X(),I=null,P=null;let[r,a,s]=e.split(".").map(d=>+d),n=r===0&&(a<8||a===8&&s<33)?"":".min",f=(o=/^\?polywasm=([01])$/.exec(location.search))==null?void 0:o[1],[u,i,l]=await Promise.all([Oe,we(`esbuild-wasm@${e}/lib/browser${n}.js`).then(d=>d.text()),we(`esbuild-wasm@${e}/esbuild.wasm`).then(d=>d.arrayBuffer())]),h=[i,`
var polywasm=${f};`,u],p=URL.createObjectURL(new Blob(h,{type:"application/javascript"}));return await new Promise((d,c)=>{let m=new Worker(p);m.onmessage=E=>{if(E.data.H==="slow"){let A=document.getElementById("slowWarning");A.innerHTML="<span>\u26A0\uFE0F Processing is slow because </span><span>WebAssembly is disabled \u26A0\uFE0F</span>",A.style.display="flex";return}m.onmessage=null,E.data.H==="success"?(d(m),G()):(c(new Error("Failed to create worker")),t=E.data.fe),URL.revokeObjectURL(p)},m.postMessage([e,l],[l])})}catch(r){throw ge(t||r+""),r}}function _(e){function t(o,r){I?(P&&P.X(),P=r):(I=r,o.onmessage=a=>{o.onmessage=null,r.de(a.data),I=null,P&&(t(o,P),P=null)},o.postMessage(r.me))}return new Promise((o,r)=>{X.then(a=>t(a,{me:e,de:o,X:()=>r(new Error("Task aborted"))}),r)})}var H=document.querySelector("#buildOptions textarea"),ue=document.getElementById("addInput"),$e=document.getElementById("buildInputs"),w=[];function de(){return[H.value,w.map(e=>({Z:e.U.classList.contains("entryPoint"),Y:e.z.value.trim(),A:e.W.value}))]}function ke(e,t){if(JSON.stringify([e,t])!==JSON.stringify(de())){for(let o of w)o.U.remove();w.length=0,H.value=e;for(let o of t)me(o.Z,o.Y,o.A);R(),B()}Q()}function be(){w.length||me(!0,fe())}function Q(){v(H);for(let e of w)v(e.W)}function B(){z();try{let e=V(H.value,1),t=Array.isArray(e.entryPoints)?e.entryPoints:e.entryPoints=[],o=Object.create(null),r=Object.create(null),a;for(let s of w){let n=s.z.value.trim();if((r[n]||(r[n]=[])).push(s),n)o[n]=s.W.value,s.U.classList.contains("entryPoint")&&!t.includes(n)&&t.push(n);else{let u=e.stdin&&typeof e.stdin=="object"?e.stdin:e.stdin={};u.contents=s.W.value,"resolveDir"in u||(u.resolveDir="/")}}for(let s in r){let n=r[s];if(n.length>1){for(let f of n)f.U.classList.add("duplicate");a||(a=new Error("Duplicate input file: "+(s?JSON.stringify(s):"<stdin>")))}else n[0].U.classList.remove("duplicate")}if(a)throw a;_({G:"build",K:o,N:e}).then(s=>{ie(s,t.length)},()=>{})}catch(e){ie({R:U(e)},-1)}}function fe(){if(!w.length)return"entry.js";let e=1,t="file.js";for(;w.some(o=>o.z.value.trim()===t);)t=`file${++e}.js`;return t}function R(){ue.textContent="+ "+fe()}function me(e=!1,t="",o=""){let r=document.createElement("div"),a=document.createElement("a"),s=document.createElement("a"),n=document.createElement("input"),f=document.createElement("div"),u=document.createElement("textarea"),i={U:r,z:n,W:u};return C(n),C(u),n.placeholder="<stdin>",n.value=t,a.className="entryToggle",a.textContent="",a.href="javascript:void 0",s.className="remove",s.textContent="\xD7",s.href="javascript:void 0",u.placeholder="(enter your code here)",u.value=o,r.className="buildInput",e&&r.classList.add("entryPoint"),f.className="hasLabel",f.append(u),r.append(a,n,s,f),$e.insertBefore(r,ue),n.oninput=()=>{R(),B()},n.onblur=()=>{let l=n.value.trim();n.value!==l&&(n.value=l,R(),B())},u.oninput=()=>{v(u),B()},a.onclick=()=>{r.classList.toggle("entryPoint"),B()},s.onclick=()=>{let l=w.indexOf(i);l<0||(w.splice(l,1),r.remove(),R(),B())},w.push(i),R(),v(u),i}H.oninput=()=>{v(H),B()};ue.onclick=()=>{let e=me(!w.length,fe());e.z.focus(),e.z.select(),B()};addEventListener("resize",Q);R();function Be(){let e=location.hash,t=atob(e.slice(1)).split("\0");if(t[0]==="t"&&t.length===4)return q(0),ye(t[2],t[3]),J(t[1]),!0;if(t[0]==="b"&&t.length%3===0){let o=[];for(let r=3;r<t.length;r+=3)o.push({Z:t[r]==="e",Y:t[r+1],A:t[r+2]});return q(1),ke(t[2],o),J(t[1]),!0}if(location.hash!=="")try{history.replaceState({},"",location.pathname)}catch{}return!1}function z(){let e=Te();if(!e)return;let t;if(k===0){let[r,a]=ve();(r||a)&&(t=["t",e,r,a])}else{let[r,a]=de();t=["b",e,r];for(let s of a)t.push(s.Z?"e":"",s.Y,s.A)}let o=location.pathname+location.search;try{let r=t?"#"+btoa(t.join("\0")).replace(/=+$/,""):"";location.hash!==r&&history.replaceState({},"",r||o)}catch{if(location.hash!=="")try{history.replaceState({},"",o)}catch{}}}Be()||J("latest");
