var B=document.getElementById("outputResult"),te=document.createElement("textarea"),ne=document.createElement("textarea"),F=document.createElement("textarea"),re=document.createElement("textarea"),oe=document.createElement("textarea"),Y=[],ee=!1;C(te,!0);C(ne,!0);C(F,!0);C(re,!0);C(oe,!0);function v(e){document.body.style.paddingBottom=e.clientHeight+"px",e.style.height="0",e.style.height=e.scrollHeight+1+"px",document.body.style.paddingBottom="0"}function C(e,o=!1){e.readOnly=o,e.spellcheck=!1,e.autocapitalize="off",e.autocomplete="off"}function U(e){let o=`\x1B[31m\u2718 \x1B[41;31m[\x1B[41;97mERROR\x1B[41;31m]\x1B[0m \x1B[1m${e&&e.message||e}\x1B[0m`,r=e&&e.j,t=e&&e.ie;if(r&&(o+=pe(r)),t)for(let a of t)o+=`
  ${a.L}`,a.j&&(o+=pe(a.j));return o}function pe({ne:e,E:o,k:r,_:t,se:a,le:s}){let n=t<2?"^":"~".repeat(t),f=`

    ${e}:${o}:${r}:
`;return f+=`\x1B[37m${o.toString().padStart(7)} \u2502 ${a.slice(0,r)}\x1B[32m${a.slice(r,r+t)}\x1B[37m${a.slice(r+t)}
`,s&&(f+=`        \u2502 ${" ".repeat(r)}\x1B[32m${n}\x1B[37m
`,n=s),f+=`        \u2575 ${" ".repeat(r)}\x1B[32m${n}\x1B[0m
`,f}function $(e,o,r){if(r!==void 0){let t=document.createElement("div");e.textContent=r.replace(/\n$/,""),t.id=o,t.className="hasLabel",t.append(e),B.append(t),v(e)}}function se({ae:e,ce:o,K:r,ue:t,R:a}){if(B.innerHTML="",$(te,"transformOutput",e),o&&$(oe,"sourceMap",o),r&&$(F,"transformMangleCache",JSON.stringify(r,null,2)),$(ne,"legalComments",t),a){let s=document.createElement("div");s.id="stderrLog",s.innerHTML=he(a),B.append(s)}if(e===void 0&&!a){let s=document.createElement("div");s.id="outputStatus",s.textContent="(no output)",B.append(s)}}function ie({fe:e,de:o,K:r,R:t},a){if(B.innerHTML="",Y.length=0,e)for(let s of e){let n=document.createElement("div"),f=document.createElement("div"),u=document.createElement("textarea");f.className="outputPath",f.textContent=s.path.replace(/^\//,""),u.readOnly=!0,u.value=s.text.replace(/\n$/,""),C(u),n.className="buildOutput hasLabel",n.append(u),B.append(f,n),Y.push(u),v(u)}if(t){let s=document.createElement("div");s.id="stderrLog",s.innerHTML=he(t),B.append(s)}if((!e||!e.length)&&!t){let s=document.createElement("div");s.id="outputStatus",s.textContent=a?"(no output)":"(no entry points)",B.append(s)}r&&$(F,"mangleCache",JSON.stringify(r,null,2)),o&&$(re,"metafile",JSON.stringify(o,null,2))}function N(e){e&&(ee=!1),!ee&&(B.innerHTML=`<span id="outputStatus">Loading${e?" version "+e:""}...</span>`)}function ge(e){ee=!0,B.innerHTML="";let o=document.createElement("div");o.className="problem",o.innerHTML=`\u274C Failed to load esbuild: ${e}`,B.append(o)}function he(e){return"<span>"+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\033\[([^m]*)m/g,(o,r)=>{switch(r){case"1":return'</span><span class="color-bold">';case"31":return'</span><span class="color-red">';case"32":return'</span><span class="color-green">';case"33":return'</span><span class="color-yellow">';case"35":return'</span><span class="color-magenta">';case"37":return'</span><span class="color-dim">';case"41;31":return'</span><span class="bg-red color-red">';case"41;97":return'</span><span class="bg-red color-white">';case"43;33":return'</span><span class="bg-yellow color-yellow">';case"43;30":return'</span><span class="bg-yellow color-black">';case"0":return"</span><span>"}throw new Error(`Unknown escape sequence: ${r}`)})+"</span>"}addEventListener("resize",()=>{if(k===0)v(te),v(oe),v(ne);else{for(let e of Y)v(e);v(re)}v(F)});function V(e,o){let r=e.trimStart();if(!r)return{};if(/^{|^\/[*/]/.test(r))return Ce(e);let t=n=>{if(s[n]!==void 0)try{s[n]=new RegExp(s[n]+"")}catch(f){throw n=n.replace(/[A-Z]/g,u=>"-"+u.toLowerCase()),new Error(`Invalid regular expression for "--${n}=": ${f.message}`)}},a=n=>{s[n]!==void 0&&(s[n]=(s[n]+"").split(","))},s=Se(e,o);return t("mangleProps"),t("reserveProps"),a("resolveExtensions"),a("mainFields"),a("conditions"),a("target"),s}function Se(e,o){let r=[],t=e.length,a=0,s=0,n=0;for(;n<t;){let l=n,h=a,p=n-s,d="",c=e[n];if(c===" "||c==="	"||c===`
`){n++,c===`
`&&(a++,s=n);continue}for(;n<t&&(c=e[n],!(c===" "||c==="	"||c===`
`));)if(n++,c==="\\"&&n<t)c=e[n++],c===`
`?(a++,s=n):d+=c;else if(c==="'"){let m=a,E=n-s-1;for(;n===t&&ae(e,"'",m,E,a,n-s),c=e[n++],c!=="'";){if(c==="\\"&&n<t&&e[n]!=="'"&&(c=e[n++],c===`
`)){a++,s=n;continue}c===`
`&&(a++,s=n),d+=c}}else if(c==='"'){let m=a,E=n-s-1;for(;n===t&&ae(e,'"',m,E,a,n-s),c=e[n++],c!=='"';){if(c==="\\"&&n<t&&(c=e[n++],c===`
`)){a++,s=n;continue}c===`
`&&(a++,s=n),d+=c}}else d+=c;r.push({L:d,E:h,k:p,_:n-l})}let f=[],u=Object.create(null),i=(l,h)=>(l!==l.toLowerCase()&&x(e,"Invalid CLI-style flag: "+JSON.stringify("--"+l),h.E,h.k,l.length+2),l.replace(/-(\w)/g,(p,d)=>d.toUpperCase()));for(let{L:l,...h}of r)if(l.startsWith("--")){let p=l.indexOf(":"),d=l.indexOf("=");if(p>=0&&d<0){let c=i(l.slice(2,p),h),m=l.slice(p+1);(!(c in u)||!Array.isArray(u[c]))&&(u[c]=[]),u[c].push(m)}else if(p>=0&&p<d){let c=i(l.slice(2,p),h),m=l.slice(p+1,d),E=l.slice(d+1);(!(c in u)||typeof u[c]!="object"||Array.isArray(u[c]))&&(u[c]=Object.create(null)),u[c][m]=E}else if(d>=0){let c=l.slice(d+1);u[i(l.slice(2,d),h)]=c==="true"?!0:c==="false"?!1:c}else u[i(l.slice(2),h)]=!0}else l.startsWith("-")||o===0?x(e,'All CLI-style flags must start with "--"',h.E,h.k,h._):f.push(l);return f.length&&(u.entryPoints=f),u}function Ce(e){let o=()=>{let p=l.v===10?"string":(l.v===8?"identifier ":"")+JSON.stringify(l.L);return x(e,`Unexpected ${p} in ${s}`,l.E,l.k,l.L.length)},r=(p,d,c)=>x(e,`Expected "${d}" after ${c} in ${s}`,p.E,p.k+p.L.length,0,"",0,0,0,d),t=(p=!1)=>{for(;i<n;){let d=f,c=i-u,m=e[i];if(m===`
`){f++,u=++i;continue}if(m===" "||m==="	"){i++;continue}if(m==="/"){let S=i++;if(i<n&&e[i]==="/"){for(i++;i<n&&e[i]!==`
`;)i++;continue}if(i<n&&e[i]==="*"){for(i++;;)if(i===n&&x(e,'Expected "*/" to terminate multi-line comment',f,i-u,0,"The multi-line comment starts here:",d,c,2,"*/"),m=e[i++],m===`
`)f++,u=i;else if(m==="*"&&i<n&&e[i]==="/"){i++;break}continue}let g=0;for(;(i===n||e[i]===`
`)&&(g?x(e,'Expected "]" to terminate character class',f,i-u,0,"The character class starts here:",f,g-u,1,"]"):x(e,'Expected "/" to terminate regular expression',f,i-u,0,"The regular expression starts here:",d,c,1,"/")),m=e[i++],!(m==="/"&&!g);)m==="]"&&g?g=0:m==="["?g=i-1:m==="\\"&&i<n&&e[i]!==`
`&&i++;for(;i<n&&/\w/.test(e[i]);)i++;let b=e.slice(S,i),y;try{y=(0,eval)(b)}catch{x(e,`Invalid regular expression in ${s}`,d,c,i-S)}l={E:d,k:c,v:9,L:b,z:y};return}p&&x(e,`Expected end of file after ${s}`,f,i-u,0);let E="-,:[]{}+".indexOf(m);if(E>=0){i++,l={E:d,k:c,v:E,L:m,z:m};return}if(m==="."||m>="0"&&m<="9"){let S=/^[\.\w]$/,g=i++;for(;i<n&&S.test(e[i]);)i++;let b=e.slice(g,i);if(!/\d/.test(b))i=g;else{let y=+b;y!==y&&x(e,`Invalid number "${b}" in ${s}`,d,c,i-g),l={E:d,k:c,v:9,L:b,z:y};return}}let A=/^[\w\$]$/;if(A.test(m)){let S=i++;for(;i<n&&A.test(e[i]);)i++;let g=e.slice(S,i),b=9,y=g;g==="null"?y=null:g==="true"?y=!0:g==="false"?y=!1:g==="undefined"?y=void 0:g==="Infinity"?y=1/0:g==="NaN"?y=NaN:b=8,l={E:d,k:c,v:b,L:g,z:y};return}if(m==='"'||m==="'"){let S=i++;for(;;)if((i===n||e[i]===`
`)&&ae(e,m,d,c,f,i-u),e[i]==="\\"&&i+1<n)i+=2,e[i-1]===`
`&&(f++,u=i);else if(e[i++]===m)break;let g=e.slice(S,i),b;try{b=(0,eval)(g)}catch{x(e,`Invalid string in ${s}`,d,c,i-S)}l={E:d,k:c,v:10,L:g,z:b};return}x(e,`Unexpected ${JSON.stringify(m)} in ${s}`,f,i-u,1)}p||x(e,`Unexpected end of file in ${s}`,f,i-u,0)},a=()=>{if(l.v===5){let p=Object.create(null);for(;t(),l.v!==6;){l.v!==10&&l.v!==8&&o();let d=l;t(),l.v!==2&&r(d,":","property "+JSON.stringify(d.z)),t(),p[d.z]=a();let c=l;if(t(),l.v===6)break;l.v!==1&&r(c,",","property "+JSON.stringify(d.z))}return p}if(l.v===3){let p=[],d=0;for(;t(),l.v!==4;)if(l.v!==1){p[d++]=a();let c=l;if(t(),l.v===4)break;l.v!==1&&r(c,",","array element")}else p.length=++d;return p}return l.v===9||l.v===10?l.z:l.v===7?(t(),+a()):l.v===0?(t(),-a()):o()},s="JSON5 value",n=e.length,f=0,u=0,i=0,l;t();let h=a();return t(!0),h}function x(e,o,r,t,a,s="",n=0,f=0,u=0,i){let l=e.split(`
`),h=new Error(o);throw h.j={ne:"<options>",E:r+1,k:t,_:a,se:l[r],le:i},s&&(h.ie=[{L:s,j:{ne:"<options>",E:n+1,k:f,_:u,se:l[n]}}]),h}function ae(e,o,r,t,a,s){let n=o==='"'?"double":"single";x(e,`Failed to find the closing ${n} quote`,a,s,0,`The opening ${n} quote is here:`,r,t,1,o)}var M=document.querySelector("#transformOptions textarea"),O=document.querySelector("#transformInput textarea");function ve(){return[M.value,O.value]}function ye(e,o){(M.value!==e||O.value!==o)&&(M.value=e,O.value=o,W()),j()}function j(){v(M),v(O)}function W(){z();try{_({G:"transform",X:O.value,U:V(M.value,0)}).then(e=>{se(e)},()=>{})}catch(e){se({R:U(e)})}}M.oninput=()=>{v(M),W()};O.oninput=()=>{v(O),W()};addEventListener("resize",j);j();var k=0,xe=[document.getElementById("transformPanel"),document.getElementById("buildPanel")],Pe=document.getElementById("modeSwitcher"),K=Pe.querySelectorAll("a");K[0].onclick=()=>{q(0)&&(N(null),G())};K[1].onclick=()=>{be(),q(1)&&(N(null),G())};function q(e){return k===e?!1:(K[k].classList.remove("active"),xe[k].style.display="none",k=e,K[k].classList.add("active"),xe[k].style.display="block",!0)}function G(){k===0?(j(),W()):(Q(),L())}var Ee=Me(),T=document.querySelector("#versionPicker select"),Z=document.createElement("option"),le;Z.textContent="Loading...";T.append(Z);T.disabled=!0;Ee.then(e=>{let o=e.filter(r=>!/^0\.[0-4]\.|^0\.5\.0/.test(r));T.disabled=!1,Z.remove();for(let r of o){let t=document.createElement("option");t.textContent=r,T.append(t)}T.onchange=()=>le(T.value),T.selectedIndex=-1},()=>{Z.textContent="\u274C Loading failed!"});function Te(){return T.disabled||T.selectedIndex<0?null:T.value}function ce(e){le=e}async function J(e){let o=await Ee,r=e==="latest"&&o.length?0:o.indexOf(e);r>=0&&T.selectedIndex!==r&&(T.selectedIndex=r,await le(o[r]))}async function Me(){let e=new AbortController,o=setTimeout(()=>e.abort("Timeout"),5e3);try{let r="https://data.jsdelivr.com/v1/package/npm/esbuild-wasm",t=await fetch(r,{signal:e.signal});if(t&&t.ok){clearTimeout(o);let a=(await t.json()).versions;if(a&&a.length)return console.log(`Loaded ${a.length} versions from ${r}`),a}}catch(r){console.error(r)}try{let r="https://registry.npmjs.org/esbuild-wasm",t=(await fetch(r).then(a=>a.json())).versions;if(t&&(t=Object.keys(t).reverse(),t.length))return console.log(`Loaded ${t.length} versions from ${r}`),t}catch(r){console.error(r)}throw new Error}var Oe=fetch("worker.js").then(e=>e.text()),I=null,P=null,X=new Promise((e,o)=>{ce(r=>{let t=Be(r);return t.then(e,o),ce(a=>(X.then(s=>s.terminate()),X=Be(a),X)),t})});async function we(e){let o=new AbortController,r=setTimeout(()=>o.abort("Timeout"),5e3);try{let t=await fetch(`https://cdn.jsdelivr.net/npm/${e}`,{signal:o.signal});if(t.ok)return clearTimeout(r),t}catch(t){console.error(t)}return fetch(`https://unpkg.com/${e}`)}async function Be(e){var r;let o;N(e);try{I&&I.Y(),P&&P.Y(),I=null,P=null;let[t,a,s]=e.split(".").map(d=>+d),n=t===0&&(a<8||a===8&&s<33)?"":".min",f=(r=/^\?polywasm=([01])$/.exec(location.search))==null?void 0:r[1],[u,i,l]=await Promise.all([Oe,we(`esbuild-wasm@${e}/lib/browser${n}.js`).then(d=>d.text()),we(`esbuild-wasm@${e}/esbuild.wasm`).then(d=>d.arrayBuffer())]),h=[i,`
var polywasm=${f};`,u],p=URL.createObjectURL(new Blob(h,{type:"application/javascript"}));return await new Promise((d,c)=>{let m=new Worker(p);m.onmessage=E=>{if(E.data.W==="slow"){let A=document.getElementById("slowWarning");A.innerHTML="<span>\u26A0\uFE0F Processing is slow because </span><span>WebAssembly is disabled \u26A0\uFE0F</span>",A.style.display="flex";return}m.onmessage=null,E.data.W==="success"?(d(m),G()):(c(new Error("Failed to create worker")),o=E.data.Fe),URL.revokeObjectURL(p)},m.postMessage([e,l],[l])})}catch(t){throw ge(o||t+""),t}}function _(e){function o(r,t){I?(P&&P.Y(),P=t):(I=t,r.onmessage=a=>{r.onmessage=null,t.me(a.data),I=null,P&&(o(r,P),P=null)},r.postMessage(t.pe))}return new Promise((r,t)=>{X.then(a=>o(a,{pe:e,me:r,Y:()=>t(new Error("Task aborted"))}),t)})}var H=document.querySelector("#buildOptions textarea"),ue=document.getElementById("addInput"),$e=document.getElementById("buildInputs"),w=[];function de(){return[H.value,w.map(e=>({Z:e.D.classList.contains("entryPoint"),ee:e.H.value.trim(),Q:e.q.value}))]}function ke(e,o){if(JSON.stringify([e,o])!==JSON.stringify(de())){for(let r of w)r.D.remove();w.length=0,H.value=e;for(let r of o)me(r.Z,r.ee,r.Q);R(),L()}Q()}function be(){w.length||me(!0,fe())}function Q(){v(H);for(let e of w)v(e.q)}function L(){z();try{let e=V(H.value,1),o=Array.isArray(e.entryPoints)?e.entryPoints:e.entryPoints=[],r=Object.create(null),t=Object.create(null),a;for(let s of w){let n=s.H.value.trim();if((t[n]||(t[n]=[])).push(s),n)r[n]=s.q.value,s.D.classList.contains("entryPoint")&&!o.includes(n)&&o.push(n);else{let u=e.stdin&&typeof e.stdin=="object"?e.stdin:e.stdin={};u.contents=s.q.value,"resolveDir"in u||(u.resolveDir="/")}}for(let s in t){let n=t[s];if(n.length>1){for(let f of n)f.D.classList.add("duplicate");a||(a=new Error("Duplicate input file: "+(s?JSON.stringify(s):"<stdin>")))}else n[0].D.classList.remove("duplicate")}if(a)throw a;_({G:"build",X:r,U:e}).then(s=>{ie(s,o.length)},()=>{})}catch(e){ie({R:U(e)},-1)}}function fe(){if(!w.length)return"entry.js";let e=1,o="file.js";for(;w.some(r=>r.H.value.trim()===o);)o=`file${++e}.js`;return o}function R(){ue.textContent="+ "+fe()}function me(e=!1,o="",r=""){let t=document.createElement("div"),a=document.createElement("a"),s=document.createElement("a"),n=document.createElement("input"),f=document.createElement("div"),u=document.createElement("textarea"),i={D:t,H:n,q:u};return C(n),C(u),n.placeholder="<stdin>",n.value=o,a.className="entryToggle",a.textContent="",a.href="javascript:void 0",s.className="remove",s.textContent="\xD7",s.href="javascript:void 0",u.placeholder="(enter your code here)",u.value=r,t.className="buildInput",e&&t.classList.add("entryPoint"),f.className="hasLabel",f.append(u),t.append(a,n,s,f),$e.insertBefore(t,ue),n.oninput=()=>{R(),L()},n.onblur=()=>{let l=n.value.trim();n.value!==l&&(n.value=l,R(),L())},u.oninput=()=>{v(u),L()},a.onclick=()=>{t.classList.toggle("entryPoint"),L()},s.onclick=()=>{let l=w.indexOf(i);l<0||(w.splice(l,1),t.remove(),R(),L())},w.push(i),R(),v(u),i}H.oninput=()=>{v(H),L()};ue.onclick=()=>{let e=me(!w.length,fe());e.H.focus(),e.H.select(),L()};addEventListener("resize",Q);R();function Le(){let e=location.hash,o=atob(e.slice(1)).split("\0");if(o[0]==="t"&&o.length===4)return q(0),ye(o[2],o[3]),J(o[1]),!0;if(o[0]==="b"&&o.length%3===0){let r=[];for(let t=3;t<o.length;t+=3)r.push({Z:o[t]==="e",ee:o[t+1],Q:o[t+2]});return q(1),ke(o[2],r),J(o[1]),!0}if(location.hash!=="")try{history.replaceState({},"",location.pathname)}catch{}return!1}function z(){let e=Te();if(!e)return;let o;if(k===0){let[t,a]=ve();(t||a)&&(o=["t",e,t,a])}else{let[t,a]=de();o=["b",e,t];for(let s of a)o.push(s.Z?"e":"",s.ee,s.Q)}let r=location.pathname+location.search;try{let t=o?"#"+btoa(o.join("\0")).replace(/=+$/,""):"";location.hash!==t&&history.replaceState({},"",t||r)}catch{if(location.hash!=="")try{history.replaceState({},"",r)}catch{}}}Le()||J("latest");
